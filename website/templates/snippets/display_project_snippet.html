{% comment %}
================================================================================
PROJECT SNIPPET TEMPLATE
================================================================================

Reusable template for displaying a single project card. Used on:
- Projects listing page (project_listing.html)
- Person profile pages (member.html)
- Index/landing page

USAGE:
  {% include "snippets/display_project_snippet.html" %}

ACCESSIBILITY:
- Uses <article> with role="listitem" (parent should use role="list")
- All images have descriptive alt text
- Award banner has meaningful alt text
- Links wrap the entire clickable area for easier interaction
- Focus indicators provided via CSS

CONTEXT VARIABLES:
- project: Project model instance (required)

DEPENDENCIES:
- design-tokens.css
- project-listing.css (styles for .project-card)

THUMBNAIL NOTES:
  We use easy-thumbnails to create thumbnail images.
  See: https://easy-thumbnails.readthedocs.io/en/latest/usage/#templates
  
  The basic syntax is: {% thumbnail [source] [size] [options] %}
  
  Size options:
    - An alias name (predefined thumbnail options)
    - A string "widthxheight" (e.g., "300x200")
    - A tuple of (width, height)
  
  Common options:
    - crop: True/False or string ('smart', 'scale', 'center')
    - upscale: True/False - upscale if smaller than target
    - quality: 1-100 for JPEG quality (default 90 in settings.py)
    - detail: Increases sharpness of cropped image
    - box: x, y, width, height of crop area

@version 2.0.0 - Fixed unclosed tag, accessibility improvements
================================================================================
{% endcomment %}

{% load static %}
{% load thumbnail %}
{% load cropping %}
{% load ml_tags %}

<article class="project-card" 
         role="listitem"
         data-project-keywords="{% for project_umbrella in project.project_umbrellas.all %}{{ project_umbrella.short_name }} {% endfor %}">
  
  <!-- Project Thumbnail -->
  <div class="project-image">
    <a href="{% url 'website:project' project.short_name %}"
       aria-label="View project: {{ project.name }}">
      <img class="project-thumbnail" 
           src="{% thumbnail project.gallery_image project.get_thumbnail_size_as_str box=project.cropping crop=True upscale=True %}" 
           alt="{{ project.get_thumbnail_alt_text }}">
      
      {% if project.has_award %}
      <img class="project-award-banner" 
           src="{% static 'website/img/awardoverlay.png' %}" 
           alt="Award-winning project"
           aria-hidden="true">
      {% endif %}
    </a>
  </div>
  
  <!-- Project Info -->
  <div class="project-info">
    <h3 class="project-title">
      <a href="{% url 'website:project' project.short_name %}">
        <span class="line-clamp-one-line">{{ project.name }}</span>
      </a>
    </h3>
    
    <p class="project-date-range">
      {{ project.start_date.year }}
      {% if project.has_ended %}
        {% if project.start_date.year != project.end_date.year %}
        – {{ project.end_date.year }}
        {% endif %}
      {% else %}
        – Present
      {% endif %}
    </p>
  </div>
  
</article>