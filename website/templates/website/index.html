{% extends "website/base.html" %}

{% block pagetitle %}Makeability Lab{% endblock %}

{% load static %}
{% load thumbnail %}
{% load cropping %}
{% load ml_tags %}

{% block stylesheets %}
  <link rel="stylesheet" href="{% static 'website/css/index.css' %}">
  <link rel="stylesheet" href="{% static 'website/css/publications.css' %}">
  <link rel="stylesheet" href="{% static 'website/css/bootstrap-modifications.css' %}">
  <link rel="stylesheet" href="{% static 'website/css/project-listing.css' %}" />
  <link rel="stylesheet" href="{% static 'website/css/sponsor-listing.css' %}" />
{% endblock %}

{% block external_scripts %}
  <script src="{% static 'website/js/jquery-ui.min.js' %}"></script>
  <script src="{% static 'website/js/citationPopoverSimple.js' %}"></script>

  {# humanize-duration is used to pretty print date ages, see https://github.com/EvanHahn/HumanizeDuration.js #}
  {# we use it, for example, to pretty print the age of videos #}
  <script src="{% static 'website/js/humanize-duration.js' %}"></script>

  {% comment %} <script type="module" src="https://cdn.jsdelivr.net/gh/makeabilitylab/js@main/dist/makelab.logo.js"></script> {% endcomment %}
  <script type="module" src="{% static 'website/js/makelab-logo.js' %}"></script>
{% endblock %}

{% block scripts %}

  $(document).ready(function() {
    // find the citation links and set up the popover content and behavior for each
    var citationLinks = $(".publication-citation-link");
    for(var i = 0; i < citationLinks.length; i++) 
    { 
      $(citationLinks[i]).citationPopover(); 
    } 
  });
  
  {% endblock %} 
  <!-- TODO:
  The navbar and banner caption should have same left and right margins as the rest of the content on page I think. As
  now, navbar is narrower -->
  {% block maincarousel %}
  {{ block.super }} {# Call the parent block #}

  <div class="container-fluid makelab-content-container news-banner-overlay-container">
    <!-- This is a news overlay on the banner -->
    <div class="container-fluid news-banner-listing">
      {% for news_item in news %}
        <p class="line-clamp news-banner-item">
          <a href="{% url 'website:news_item_by_slug' slug=news_item.slug %}">
            <span class="news-banner-item-date">{{ news_item.date }}.</span>
            {{ news_item.title }}
          </a>
        </p>
      {% endfor %}
      <p class="line-clamp news-banner-item">
        <a href="{% url 'website:news_listing' %}">See more news â†’</a>
      </p>
    </div>
  </div>
{% endblock %}

{% block content %}

  <div id="makelab-about-us" class="container-fluid makelab-content-container">
    <h1 class="section-header" style="margin-top:25px">About Us</h1>
    <div class="row about-us-grid">
      <div class="col-md-6 col-sm-12">
        <canvas id="myCanvas" width="150" height="150"></canvas>
      </div>
      <div class="col-md-6 col-sm-12">
        <p>
          The Makeability Lab is an <strong>advanced research lab in Human-AI</strong> directed by <a href="{url: }">Jon E. Froehlich</a> in the 
          <a href="https://www.cs.washington.edu/">Allen School of Computer Science</a> at the University 
          of Washington. We specialize in Human-Computer Interaction and applied machine learning for high-impact
          problems in urban computing, accessibility, and augmented reality. To learn more, see our 
          <a href="#recent-projects">recent projects</a> below and read about our lab culture and values in the 
          <a href="https://docs.google.com/document/d/1YiiDsfpiolpXjUTj8xWrQwQQUzqrfqT9bocOpaYDrtI/edit">Makeability Lab handbook.</a>
        </p>
        <p>
          We are always looking for talented and motivated students to join our lab. If you are a current UW student 
          interested in our research, please <a href="https://goo.gl/forms/59lAm3CUuupiMhUt1">apply here</a>. 
          If you are a prospective student, please apply to the <a href="https://www.cs.washington.edu/academics/phd">UW CSE Ph.D. program</a> 
          and mention your interest in working with Professor Froehlich in your application. Before applying, please
          read our <a href="https://docs.google.com/document/d/1YiiDsfpiolpXjUTj8xWrQwQQUzqrfqT9bocOpaYDrtI/edit">lab handbook</a>.
        </p>
      </div>
    </div>
  </div>

  <div id="makelab-recent-projects" class="container-fluid makelab-content-container">
    <h1 class="section-header" id="recent-projects">Recent Projects</h1>
    <div class="project-grid landing-page-project-grid">
      {% for project in projects %}
      {% include "snippets/display_project_snippet.html" %}
      {% endfor %}
    </div>
    <div class="row justify-content-end">
      <div class="col-xs-12 see-all-artifacts">
        <div class="col-xs-12" style="display:none"></div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 see-all-artifacts pull-right">
          <a href="{% url 'website:projects' %}">See All Projects ></a>
        </div>
      </div>
    </div>
  </div>

  <div id="makelab-recent-papers" class="container-fluid makelab-content-container">
    <h1 class="section-header">Recent Papers</h1>
    <div class="section">
      {% for pub in publications %}
        {% include "snippets/display_pub_snippet.html" with orientation="horizontal" %}
      {% endfor %}
      <div class="col-xs-12 see-all-artifacts">
        <a href="{% url 'website:publications' %}">See All Papers ></a>
      </div>
    </div>
  </div>

  <div id="makelab-recent-videos" class="container-fluid makelab-content-container">
    <h1 class="section-header">Recent Videos</h1>
    <div class="section">
      {% for video in videos %}
        {% include "snippets/display_video_snippet.html" %}
      {% endfor %}
      {% comment %} <div class="col-xs-12 see-all-artifacts">
        <a href="{% url 'website:videos' %}">See All Videos ></a>
      </div> {% endcomment %}
    </div>
  </div>

  <div id="makelab-recent-talks" class="container-fluid makelab-content-container">
    <h1 class="section-header">Recent Talks</h1>
    <div class="section">
      {% for talk in talks %}
        {% include "snippets/display_talk_snippet.html" %}
      {% endfor %}
      {% comment %} <div class="col-xs-12 see-all-artifacts">
        <a href="{% url 'website:talks' %}">See All Talks ></a>
      </div> {% endcomment %}
    </div>
  </div>

  <div id="makelab-sponsors" class="container-fluid makelab-content-container">
    <h1 class="section-header">Sponsors</h1>
    <div class="sponsorship-statement">
      Makeability Lab research is made possible by the generous support of our sponsors. 
      Our research findings, opinions, and/or recommendations may not reflect their views.
    </div>
    <div class="sponsor-grid">
      {% for sponsor in sponsors %}
        <div class="sponsor-card">
          <div class="sponsor-logo">
            {% if sponsor.icon %}
              <a href="{{sponsor.url}}">
                <img class="sponsor-img" 
                {% comment %}
                    We use easy-thumbnails to create thumbnail image: https://easy-thumbnails.readthedocs.io/en/latest/usage/#templates
                    The basic syntax is: {% thumbnail [source] [size] [options] %}
                    For options, see: https://easy-thumbnails.readthedocs.io/en/latest/usage/#thumbnail-options 
                {% endcomment %}
                src="{% thumbnail sponsor.icon sponsor.get_thumbnail_size_as_str box=sponsor.icon_cropping crop=True upscale=True %}" 
                alt="{{sponsor.get_icon_alt_text}}"
                title="{{sponsor.name}}"/>
              </a>
            {% endif %}
          </div>
          {% comment %} Uncomment the following if you want text below the logos {% endcomment %}
          {% comment %} <div class="sponsor-info">
            {{ sponsor.name }}<br/>
            ${{ sponsor.total_funding}}
          </div> {% endcomment %}
        </div>
      {% endfor %}
    </div>
  </div>

{% endblock %}