{% extends "website/base.html" %}

{% comment %}
================================================================================
INDEX PAGE (LANDING PAGE) - Makeability Lab
================================================================================

The main landing page for the Makeability Lab website displaying:
- Hero carousel with news overlay
- About Us section with animated logo canvas
- Recent projects grid
- Recent publications
- Recent videos
- Recent talks
- Sponsors

ACCESSIBILITY FEATURES:
- Screen-reader-only h1 for page identification
- Semantic HTML5 elements (section, article, nav)
- ARIA labels on sections via aria-labelledby
- Proper heading hierarchy (sr-only h1, visible h2s for sections)
- Alt text on all images
- Visible focus indicators on all interactive elements
- Anchor links on section headings for shareability
- News banner has proper link accessibility

DEPENDENCIES:
- design-tokens.css (loaded via base.html)
- index.css
- project-listing.css
- publications.css
- video-snippet.css
- talk-snippet.css
- sponsor-listing.css
- makelab-logo.js (canvas animation)
- citationPopoverSimple.js (publication citations)
- video-age.js (humanized video dates)

CONTEXT VARIABLES:
- banners: QuerySet of Banner objects for carousel (from base.html)
- news: QuerySet of recent News items (for banner overlay)
- projects: QuerySet of recent Project objects
- publications: QuerySet of recent Publication objects
- videos: QuerySet of recent Video objects
- talks: QuerySet of recent Talk objects
- sponsors: QuerySet of Sponsor objects

@version 2.0.0 - Accessibility and design token refactor
@author Makeability Lab
================================================================================
{% endcomment %}

{% block pagetitle %}Makeability Lab{% endblock %}

{% load static %}
{% load thumbnail %}
{% load cropping %}
{% load ml_tags %}

{% block stylesheets %}
<link rel="stylesheet" href="{% static 'website/css/index.css' %}">
<link rel="stylesheet" href="{% static 'website/css/publications.css' %}">
<link rel="stylesheet" href="{% static 'website/css/bootstrap-modifications.css' %}">
<link rel="stylesheet" href="{% static 'website/css/project-listing.css' %}">
<link rel="stylesheet" href="{% static 'website/css/video-snippet.css' %}">
<link rel="stylesheet" href="{% static 'website/css/talk-snippet.css' %}">
<link rel="stylesheet" href="{% static 'website/css/sponsor-listing.css' %}">
{% endblock %}

{% block external_scripts %}
<script src="{% static 'website/js/jquery-ui.min.js' %}"></script>
<script src="{% static 'website/js/citationPopoverSimple.js' %}"></script>
<script src="{% static 'website/js/humanize-duration.js' %}"></script>
<script src="{% static 'website/js/video-age.js' %}"></script>
<script type="module" src="{% static 'website/js/makelab-logo.js' %}"></script>
{% endblock %}

{% block scripts %}
document.addEventListener('DOMContentLoaded', function() {
  CitationPopover.init('.publication-citation-link');
  VideoAge.init();
});
{% endblock %}

{% block maincarousel %}
{{ block.super }}

<!-- News Banner Overlay on Carousel -->
<div class="container-fluid makelab-content-container news-banner-overlay-container">
  <nav class="news-banner-listing" aria-label="Latest news">
    {% for news_item in news %}
    <p class="line-clamp news-banner-item">
      <a href="{% url 'website:news_item_by_slug' slug=news_item.slug %}">
        <span class="news-banner-item-date">{{ news_item.date }}.</span>
        <span class="news-banner-item-text">{{ news_item.title }}</span>
      </a>
    </p>
    {% endfor %}
    <p class="news-banner-item">
      <a href="{% url 'website:news_listing' %}" aria-label="View all news articles">
        See more news â†’
      </a>
    </p>
  </nav>
</div>
{% endblock %}

{% block content %}

<!-- Screen-reader-only page title for accessibility -->
<h1 class="sr-only">Makeability Lab - Home</h1>

<!-- ======================== About Us Section ======================== -->
<section id="makelab-about-us" 
         class="container-fluid makelab-content-container"
         aria-labelledby="about-us-heading">
  
  <h2 id="about-us-heading" class="section-header first-section heading-with-anchor">
    About Us
    <a href="#about-us-heading" 
       class="header-anchor" 
       aria-label="Link to About Us section">
      <i class="fa-solid fa-link" aria-hidden="true"></i>
    </a>
  </h2>
  
  <div class="row about-us-grid">
    <div class="col-md-6 center-canvas">
      <canvas id="makelab-logo-canvas" 
              role="img" 
              aria-label="Animated Makeability Lab logo"></canvas>
    </div>
    <div class="col-md-6">
      <p>
        The Makeability Lab is an <strong>advanced research lab in Human-AI</strong> directed by
        <a href="{% url 'website:member_by_name' member_name='jonfroehlich' %}">Professor Jon E. Froehlich</a> in the 
        <a href="https://www.cs.washington.edu/">Allen School of Computer Science</a> at the University 
        of Washington. 
      </p>
      <p>
        We specialize in <strong>Human-Computer Interaction</strong> and <strong>applied machine learning</strong> for high-impact
        problems in:
        <ul class="about-us-list">
          <li class="about-us-list-item">ðŸŒ† <strong>Urban Computing / GeoAI</strong>: Building accessible, intelligent cities</li> 
          <li class="about-us-list-item">ðŸ¥½ <strong>Augmented Reality</strong>: Enhancing human capabilities</li>
          <li class="about-us-list-item">ðŸŽ¨ <strong>Creativity Support Tools</strong>: AI-powered imagination systems</li>
          <li class="about-us-list-item">ðŸ¦½ <strong>Accessibility</strong>: Improving access via Human-AI techniques</li>
        </ul> 
      </p>
      <p>
      To learn more, see our 
        <a href="#recent-projects-heading">recent projects</a> and 
        <a href="https://docs.google.com/document/d/1YiiDsfpiolpXjUTj8xWrQwQQUzqrfqT9bocOpaYDrtI/edit">our lab handbook.</a>
      </p>
      <p>
        <strong>Interested in working with us?</strong> If you are a current UW undergrad, UW MS student, or local Seattle high school student, please <a href="https://goo.gl/forms/59lAm3CUuupiMhUt1">apply here</a>.</li>
        If you are a prospective PhD student, apply to the <a href="https://www.cs.washington.edu/academics/phd">UW CSE PhD program</a> 
        and mention Professor Froehlich. Before applying, please read the "Prospective PhD Student" section of our <a href="https://docs.google.com/document/d/1YiiDsfpiolpXjUTj8xWrQwQQUzqrfqT9bocOpaYDrtI/edit?tab=t.0#heading=h.3coycnd2v0xc">lab handbook</a>.</li>
      </p>
    </div>
  </div>
</section>

<!-- ======================== Recent Projects Section ======================== -->
<section id="makelab-recent-projects" 
         class="container-fluid makelab-content-container"
         aria-labelledby="recent-projects-heading">
  
  <h2 id="recent-projects-heading" class="section-header heading-with-anchor">
    Recent Projects
    <a href="#recent-projects-heading" 
       class="header-anchor" 
       aria-label="Link to Recent Projects section">
      <i class="fa-solid fa-link" aria-hidden="true"></i>
    </a>
  </h2>
  
  <div class="project-grid landing-page-project-grid" role="list">
    {% for project in projects %}
    {% include "snippets/display_project_snippet.html" %}
    {% endfor %}
  </div>
  
  <div class="see-all-artifacts">
    <a href="{% url 'website:projects' %}" aria-label="View all research projects">
      See All Projects â†’
    </a>
  </div>
</section>

<!-- ======================== Recent Papers Section ======================== -->
<section id="makelab-recent-papers" 
         class="container-fluid makelab-content-container"
         aria-labelledby="recent-papers-heading">
  
  <h2 id="recent-papers-heading" class="section-header heading-with-anchor">
    Recent Papers
    <a href="#recent-papers-heading" 
       class="header-anchor" 
       aria-label="Link to Recent Papers section">
      <i class="fa-solid fa-link" aria-hidden="true"></i>
    </a>
  </h2>
  
  <div class="landing-publications-grid">
    {% for pub in publications %}
    {% include "snippets/display_pub_snippet.html" with orientation="horizontal" %}
    {% endfor %}
  </div>
  
  <div class="see-all-artifacts">
    <a href="{% url 'website:publications' %}" aria-label="View all publications">
      See All Papers â†’
    </a>
  </div>
</section>

<!-- ======================== Recent Videos Section ======================== -->
<section id="makelab-recent-videos" 
         class="container-fluid makelab-content-container"
         aria-labelledby="recent-videos-heading">
  
  <h2 id="recent-videos-heading" class="section-header heading-with-anchor">
    Recent Videos
    <a href="#recent-videos-heading" 
       class="header-anchor" 
       aria-label="Link to Recent Videos section">
      <i class="fa-solid fa-link" aria-hidden="true"></i>
    </a>
  </h2>
  
  <div class="landing-videos-grid">
    {% for video in videos %}
    {% include "snippets/display_video_snippet.html" %}
    {% endfor %}
  </div>
</section>

<!-- ======================== Recent Talks Section ======================== -->
<section id="makelab-recent-talks" 
         class="container-fluid makelab-content-container"
         aria-labelledby="recent-talks-heading">
  
  <h2 id="recent-talks-heading" class="section-header heading-with-anchor">
    Recent Talks
    <a href="#recent-talks-heading" 
       class="header-anchor" 
       aria-label="Link to Recent Talks section">
      <i class="fa-solid fa-link" aria-hidden="true"></i>
    </a>
  </h2>
  
  <div class="landing-talks-grid">
    {% for talk in talks %}
    {% include "snippets/display_talk_snippet.html" %}
    {% endfor %}
  </div>
</section>

<!-- ======================== Sponsors Section ======================== -->
<section id="makelab-sponsors" 
         class="container-fluid makelab-content-container"
         aria-labelledby="sponsors-heading">
  
  <h2 id="sponsors-heading" class="section-header heading-with-anchor">
    Sponsors
    <a href="#sponsors-heading" 
       class="header-anchor" 
       aria-label="Link to Sponsors section">
      <i class="fa-solid fa-link" aria-hidden="true"></i>
    </a>
  </h2>
  
  <p class="sponsorship-statement">
    Makeability Lab research is made possible by the generous support of our sponsors. 
    Our research findings, opinions, and/or recommendations may not reflect their views.
  </p>
  
  <div class="sponsor-grid" role="list">
    {% for sponsor in sponsors %}
    <div class="sponsor-card" role="listitem">
      <div class="sponsor-logo">
        {% if sponsor.icon %}
        <a href="{{ sponsor.url }}" 
           aria-label="Visit {{ sponsor.name }} website">
          <img class="sponsor-img" 
               src="{% thumbnail sponsor.icon sponsor.get_thumbnail_size_as_str box=sponsor.icon_cropping crop=True upscale=True %}" 
               alt="{{ sponsor.get_icon_alt_text }}"
               title="{{ sponsor.name }}">
        </a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</section>

{% endblock %}